Perfeito üëç
Aqui vai um **How-To b√°sico de Kubernetes**, com explica√ß√£o dos conceitos principais e uma **tabela com os comandos mais usados** e o que cada um faz.

---

## üß≠ O que √© Kubernetes?

**Kubernetes (K8s)** √© uma plataforma open source para **gerenciar, escalar e orquestrar containers** (como Docker containers) em clusters de servidores.
Ele automatiza a implanta√ß√£o, o balanceamento de carga, a recupera√ß√£o de falhas e a escalabilidade das aplica√ß√µes.

---

## üß© Conceitos fundamentais

| Conceito               | Descri√ß√£o                                                           |
| ---------------------- | ------------------------------------------------------------------- |
| **Cluster**            | Conjunto de m√°quinas (n√≥s) gerenciadas pelo Kubernetes.             |
| **Node (n√≥)**          | M√°quina f√≠sica ou virtual que executa os containers.                |
| **Pod**                | A menor unidade do Kubernetes, que encapsula um ou mais containers. |
| **Deployment**         | Controla a cria√ß√£o e atualiza√ß√£o dos Pods.                          |
| **Service**            | Exposi√ß√£o est√°vel (IP/porta) para acesso aos Pods.                  |
| **Namespace**          | Particiona recursos dentro do cluster.                              |
| **ConfigMap / Secret** | Armazena configura√ß√µes e credenciais para uso nos Pods.             |

---

## üíª Comandos b√°sicos do Kubernetes

| Comando                                                               | Descri√ß√£o                                                   |
| --------------------------------------------------------------------- | ----------------------------------------------------------- |
| `kubectl version`                                                     | Mostra a vers√£o do cliente e do servidor Kubernetes.        |
| `kubectl cluster-info`                                                | Exibe informa√ß√µes sobre o cluster e os servi√ßos principais. |
| `kubectl get nodes`                                                   | Lista todos os n√≥s do cluster.                              |
| `kubectl get pods`                                                    | Lista todos os pods no namespace atual.                     |
| `kubectl get pods -A`                                                 | Lista todos os pods em todos os namespaces.                 |
| `kubectl get services`                                                | Lista os servi√ßos criados no cluster.                       |
| `kubectl get deployments`                                             | Mostra os deployments ativos.                               |
| `kubectl describe pod <nome-do-pod>`                                  | Mostra detalhes e eventos de um pod espec√≠fico.             |
| `kubectl logs <nome-do-pod>`                                          | Exibe os logs de um pod.                                    |
| `kubectl exec -it <nome-do-pod> -- /bin/sh`                           | Acessa o terminal dentro de um container em execu√ß√£o.       |
| `kubectl apply -f <arquivo.yaml>`                                     | Cria ou atualiza recursos definidos em um arquivo YAML.     |
| `kubectl create -f <arquivo.yaml>`                                    | Cria recursos a partir de um arquivo YAML.                  |
| `kubectl delete -f <arquivo.yaml>`                                    | Remove recursos definidos em um arquivo YAML.               |
| `kubectl delete pod <nome-do-pod>`                                    | Deleta um pod espec√≠fico.                                   |
| `kubectl rollout status deployment/<nome>`                            | Mostra o status da atualiza√ß√£o de um deployment.            |
| `kubectl rollout undo deployment/<nome>`                              | Reverte um deployment para a vers√£o anterior.               |
| `kubectl scale deployment <nome> --replicas=<n>`                      | Ajusta a quantidade de r√©plicas de um deployment.           |
| `kubectl get namespaces`                                              | Lista todos os namespaces.                                  |
| `kubectl config get-contexts`                                         | Mostra os contextos de configura√ß√£o (clusters acess√≠veis).  |
| `kubectl config use-context <contexto>`                               | Alterna entre clusters ou contextos.                        |
| `kubectl port-forward pod/<nome> <porta_local>:<porta_pod>`           | Encaminha uma porta local para o pod.                       |
| `kubectl expose deployment <nome> --type=LoadBalancer --port=<porta>` | Cria um service para expor o deployment.                    |
| `kubectl get events`                                                  | Lista eventos recentes no cluster (√∫til para debug).        |

---

## üöÄ Fluxo b√°sico de uso

1. **Criar um arquivo YAML** (por exemplo `deployment.yaml`) descrevendo o app (Pod, Deployment, Service, etc.)
2. **Aplicar o arquivo**:

   ```bash
   kubectl apply -f deployment.yaml
   ```
3. **Verificar se tudo subiu corretamente**:

   ```bash
   kubectl get pods
   kubectl get services
   ```
4. **Ver logs ou acessar o container**:

   ```bash
   kubectl logs <pod>
   kubectl exec -it <pod> -- /bin/sh
   ```
5. **Remover quando n√£o precisar mais**:

   ```bash
   kubectl delete -f deployment.yaml
   ```

---

Vamos destrinchar **`port`**, **`targetPort`** e **`nodePort`** de forma simples, visual e pr√°tica.

---

## üéØ Contexto r√°pido

Seu **Pod** (onde roda o WildFly) exp√µe a porta **8080** internamente:

```yaml
containers:
  - name: garage474-main-service
    ports:
      - containerPort: 8080
```

Mas o Kubernetes **n√£o deixa voc√™ acessar um Pod diretamente de fora** (por seguran√ßa e abstra√ß√£o).
Ent√£o voc√™ cria um **Service**, que serve como ‚Äúponte‚Äù entre o **mundo externo** e o **Pod**.

---

## ‚öôÔ∏è O papel de cada porta

Vamos usar um exemplo pr√°tico:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp
spec:
  type: NodePort
  selector:
    app: garage474-main-service
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
      nodePort: 30080
```

Agora, veja o fluxo:

```
[Usu√°rio navegador]
       ‚îÇ
       ‚ñº
http://<minikube-ip>:30080
       ‚îÇ
       ‚ñº
Service (porta 80)
       ‚îÇ
       ‚ñº
Pod (porta 8080)
```

---

## üîç Entendendo cada campo

| Campo             | Onde fica                           | O que faz                                              | Exemplo |
| ----------------- | ----------------------------------- | ------------------------------------------------------ | ------- |
| **containerPort** | no Pod                              | Porta **interna do container** onde a aplica√ß√£o escuta | `8080`  |
| **targetPort**    | no Service                          | Porta **no Pod** para onde o tr√°fego ser√° enviado      | `8080`  |
| **port**          | no Service                          | Porta **dentro do Service** (acessada por outros Pods) | `80`    |
| **nodePort**      | no Service (s√≥ se `type: NodePort`) | Porta **no n√≥/host** (acessada externamente)           | `30080` |

---

## üí° Analogia simples

Imagine o **Service** como uma central telef√¥nica:

| N√≠vel                            | Representa√ß√£o              | Porta                   |
| -------------------------------- | -------------------------- | ----------------------- |
| **Mundo externo (host)**         | o n√∫mero da central        | `nodePort` (ex: 30080)  |
| **Service (a central)**          | a linha interna da empresa | `port` (ex: 80)         |
| **Pod (o ramal do funcion√°rio)** | o ramal final              | `targetPort` (ex: 8080) |

Quando algu√©m liga para `30080`, o Kubernetes redireciona para o Service (`80`), que conecta ao Pod (`8080`).

---

## üß© Quando usar cada um

| Situa√ß√£o                       | Campos usados                    | Explica√ß√£o                                    |
| ------------------------------ | -------------------------------- | --------------------------------------------- |
| Comunica√ß√£o interna entre Pods | `port`, `targetPort`             | N√£o precisa de `nodePort` nem Ingress         |
| Acesso externo (ex: navegador) | `port`, `targetPort`, `nodePort` | Usa `type: NodePort`                          |
| Dom√≠nio e HTTPS                | `port`, `targetPort` + Ingress   | Ingress faz o papel do ‚ÄúNodePort inteligente‚Äù |

---

## üîé Exemplo pr√°tico no seu caso

Seu WildFly escuta em **8080** ‚Üí √© o `targetPort` (porta no Pod).
Voc√™ escolheu `port: 80` ‚Üí √© a porta "p√∫blica" do Service dentro do cluster.
E com `nodePort: 30080` ‚Üí voc√™ consegue acessar de fora do cluster (ex: do navegador).

Assim:

```
http://<minikube-ip>:30080  ‚Üí  encaminha para 8080 no Pod
```

---

## ‚úÖ Resumo final

| Campo           | Local   | Significado                                                    | Exemplo | Necess√°rio para             |
| --------------- | ------- | -------------------------------------------------------------- | ------- | --------------------------- |
| `containerPort` | Pod     | Onde a app escuta                                              | 8080    | Sempre                      |
| `targetPort`    | Service | Porta do Pod onde o Service envia o tr√°fego                    | 8080    | Sempre                      |
| `port`          | Service | Porta exposta dentro do cluster (outros Pods acessam por aqui) | 80      | Sempre                      |
| `nodePort`      | Service | Porta exposta fora do cluster (para o host externo)            | 30080   | S√≥ se quiser acesso externo |

---


